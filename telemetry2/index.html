<!DOCTYPE html>
<html>
	<head>
		<title>Raspberry Pi + COSM + Icenium </title>
		<script type="text/javascript" src="cordova.js"></script>
		<script type="text/javascript" charset="utf-8"></script>
		<script>
			document.addEventListener('deviceready', bodyLoad, false); 

			function showImg1() {
				var element = document.getElementById("progress1");
				element.style.display = "none";
			}

			function showImg2() {
				var element = document.getElementById("progress2");
				element.style.display = "none";
			}
			
			function bodyLoad() {
				var w = window,d = document,e = d.documentElement,g = d.getElementsByTagName('body')[0],x = w.innerWidth || e.clientWidth || g.clientWidth,y = w.innerHeight || e.clientHeight || g.clientHeight;
			
				chartW = parseInt(x - 30);
				chartH = parseInt(y / 2 - 30);
			
				var element = document.getElementById("progress1");
				element.style.display = "";
				var element2 = document.getElementById("progress2");
				element2.style.display = "";
			
				var panel1 = document.getElementById("panel1");
				panel1.innerHTML = '<img id="img1" style="" onload="showImg1()" ' +
								   'src="https://api.cosm.com/v2/feeds/71187/datastreams/temp1.png?' +
								   'width=' + chartW + '&height=' + chartH + 
								   '&colour=%23f15a24&duration=6hours&title=Temperature%2C%206%20hours' +
								   '&show_axis_labels=true&detailed_grid=true&&scale=manual&min=10&max=30&timezone=Sofia">';
				var panel2 = document.getElementById("panel2");
				panel2.innerHTML = '<img id="img2" style="" onload="showImg2()" ' +
								   'src="https://api.cosm.com/v2/feeds/71187/datastreams/temp1.png?' +
								   'width=' + chartW + '&height=' + chartH +
								   '&colour=%23f15a24&duration=1week&title=Temperature%2C%201%20week' +
								   '&show_axis_labels=true&detailed_grid=true&&scale=manual&min=10&max=30&timezone=Sofia">';
				var info = document.getElementById("info");			
				info.innerHTML = ('v1.7 update - Screen size: ' + x + ' x ' + y + ';   Chart size: ' + 'width=' + chartW + '&height=' + chartH)
			}
			
            
     
		</script>
	</head>
	<body>
		<img id="progress1" style="" src="ajax-loader.gif">
		
		<div id="panel1">
		</div>
		
		<img id="progress2" style="" src="ajax-loader.gif">
		
		<div id="panel2">
		</div>
		
		<input type="button" value="Refresh" onclick="bodyLoad();" >
		
		<div id="info">
		</div>
		
	</body>
	
</html>

		